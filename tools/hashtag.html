<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Hashtag Generator â€” TrendBoard Tools</title>
  <meta name="description" content="Generate hashtag sets: short, SEO, mix and regional.">
  <link rel="stylesheet" href="../assets/style.css"/>
</head>
<body>
  <header class="topbar">
    <div class="brand"><div class="logo-mark">TB</div><div class="brand-text"><h1>TrendBoard</h1><small>Hashtag Generator</small></div></div>
    <nav class="nav"><a href="../index.html">Home</a><a href="index.html">Tools</a></nav>
    <div class="actions"><button class="icon-btn" title="Toggle theme">ðŸŒ“</button></div>
  </header>

  <main class="container">
    <section class="card glass">
      <h2>Hashtag Generator</h2>
      <p class="muted">Enter keywords or paste a caption. Choose a style and generate up to 12 hashtags optimized for sharing.</p>

      <label>Input (keywords or caption)</label>
      <textarea id="h_input" rows="3" placeholder="e.g., travel photography, chai recipe"></textarea>

      <div style="display:flex;gap:8px;margin-top:10px;flex-wrap:wrap">
        <select id="h_mode" style="padding:8px;border-radius:8px;">
          <option value="mix">Mixed (balanced)</option>
          <option value="seo">SEO-focused</option>
          <option value="short">Short & trending</option>
          <option value="regional">Regional / Hinglish</option>
        </select>
        <select id="h_length" style="padding:8px;border-radius:8px;">
          <option value="8">8 tags</option>
          <option value="10" selected>10 tags</option>
          <option value="12">12 tags</option>
        </select>
        <button id="h_gen" class="primary-btn">Generate</button>
      </div>

      <div id="h_out" class="output" aria-live="polite" style="margin-top:12px"></div>
      <div style="margin-top:10px;display:flex;gap:8px">
        <button id="h_copy" class="primary-btn">Copy</button>
        <button id="h_clear" class="btn">Clear</button>
      </div>
    </section>
  </main>

<script src="../assets/script.js"></script>
<script>
(function(){
  const inEl = document.getElementById('h_input');
  const out = document.getElementById('h_out');
  const gen = document.getElementById('h_gen');
  const copy = document.getElementById('h_copy');
  const clear = document.getElementById('h_clear');
  const modeSel = document.getElementById('h_mode');
  const lengthSel = document.getElementById('h_length');

  // tokenization: extract meaningful tokens
  function tokensFrom(text){
    text = text.replace(/https?:\/\/\S+/gi,'').replace(/[^\w\s]/g,' ').toLowerCase();
    const words = text.split(/\s+/).filter(Boolean).slice(0,6);
    // weight longer meaningful words
    return words.length ? words : ['trending'];
  }

  function makeHashtag(word){
    // keep alnum only, limit length
    return '#'+word.toString().replace(/[^a-z0-9]/gi,'').slice(0,24);
  }

  function generate(tokens, mode, length){
    const set = new Set();
    if(mode === 'short'){
      tokens.forEach(t => set.add(makeHashtag(t)));
      set.add('#viral'); set.add('#trend');
      set.add('#fyp'); set.add('#explore');
    } else if(mode === 'seo'){
      tokens.forEach(t => set.add(makeHashtag(t)));
      tokens.forEach(t => set.add(makeHashtag(t+'tips')));
      set.add('#howto'); set.add('#guide');
    } else if(mode === 'regional'){
      tokens.forEach(t => set.add(makeHashtag(t+'India')));
      tokens.add = (x)=>set.add(makeHashtag(x));
      set.add('#Desi'); set.add('#Hindustani');
      tokens.forEach(t=>set.add(makeHashtag('Desi'+t)));
    } else { // mix
      tokens.forEach(t=>{
        set.add(makeHashtag(t));
        set.add(makeHashtag(window.TB.hashtagify(t)));
      });
      set.add('#TrendingNow'); set.add('#ForYou');
    }

    // ensure we return length items; if not enough, pad with variations
    const arr = Array.from(set).slice(0,length);
    while(arr.length < length){
      arr.push('#'+Math.random().toString(36).slice(2,8));
    }
    return arr.slice(0,length);
  }

  gen.addEventListener('click', ()=>{
    const text = inEl.value.trim();
    if(!text) { out.textContent = 'Enter a topic or caption to generate hashtags.'; return; }
    const mode = modeSel.value;
    const length = parseInt(lengthSel.value,10) || 10;
    const tokens = tokensFrom(text);
    const tags = generate(tokens, mode, length);
    out.innerHTML = '<div style="font-weight:600;margin-bottom:8px">Hashtags</div><div style="word-break:break-word">'+tags.join(' ')+'</div>';
  });

  copy.addEventListener('click', ()=>{
    const txt = out.innerText || out.textContent;
    if(!txt) return alert('Generate hashtags first');
    navigator.clipboard.writeText(txt).then(()=>alert('Hashtags copied to clipboard'));
  });

  clear.addEventListener('click', ()=>{ inEl.value=''; out.innerHTML=''; });
})();
</script>
</body>
</html>
